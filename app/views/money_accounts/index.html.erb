<div class="space-y-6" data-controller="dashboard">
  <!-- Header -->
  <%= render partial: 'layouts/header' %>

  <div class="accounts-card--container">
    <% @money_accounts.each do |account| %>
      <%= render CardComponent.new do %>
        <%= render CardComponent::Header.new do %>
          <div class="flex items-center justify-b etween">
            <%= render CardComponent::Title.new(class: "text-sm font-medium") { account.name } %>
          </div>
        <% end %>

        <%= render CardComponent::Content.new do %>
          <div class="text-2xl font-bold">$<%= account.balance %></div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>

<div class="rounded-lg border border-gray-200 bg-card text-card-foreground shadow-sm mt-8">
  <div class="flex flex-col space-y-1.5 p-6">
    <h3 class="font-semibold tracking-tight text-lg">Filtros</h3>
  </div>
  <div class="p-6 pt-0">
    <div class="flex gap-2">
      <div class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search absolute left-3 top-3 h-4 w-4 text-gray-400">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </svg>
        <input class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 pl-10" placeholder="Buscar movimientos..." value="">
      </div>
      <button type="button" role="combobox" aria-controls="radix-_r_f_" aria-expanded="false" aria-autocomplete="none" dir="ltr" data-state="closed" class="flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&amp;&gt;span]:line-clamp-1">
        <span style="pointer-events: none;">Todas las cuentas</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 opacity-50" aria-hidden="true">
          <path d="m6 9 6 6 6-6"></path>
        </svg>
      </button>
      <button type="button" role="combobox" aria-controls="radix-_r_g_" aria-expanded="false" aria-autocomplete="none" dir="ltr" data-state="closed" class="flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&amp;&gt;span]:line-clamp-1">
        <span style="pointer-events: none;">Todas las categorías</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 opacity-50" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg>
      </button>
      <button class="justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border border-input hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 flex items-center gap-2 bg-transparent">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-filter h-4 w-4">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
        </svg>
        Más filtros
      </button>
    </div>
  </div>
</div>

<%= render CardComponent.new(class: 'mt-8') do %>
  <%= render CardComponent::Header.new do %>
    <%= render CardComponent::Title.new { "Movimientos Recientes" } %>
    <%= render CardComponent::Description.new { "#{@transactions.count} movimientos encontrados" } %>
  <% end %>

  <%= render CardComponent::Content.new do %>
    <div class="space-y-4">
      <% @transactions.each do |transaction| %>
        <div class="flex items-center justify-between p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
          <div class="flex items-center gap-4">
            <div class="flex-shrink-0">
              <% if transaction.incoming? %>
                <%= lucide_icon 'move-up-right', class: 'text-green-500' %>
              <% else %>
                <%= lucide_icon 'move-down-left', class: 'text-red-600' %>
              <% end %>
            </div>

            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2">
                <p class="font-medium text-gray-900 truncate"><%= transaction.description %></p>
                <%= render BadgeComponent.new(variant: :default) do %>
                  <%= transaction.transaction_type %>
                <% end %>
              </div>

              <div>
                <div class="flex items-center gap-4 text-sm text-gray-500">
                  <span><%= transaction.money_account.name %></span>
                  <span>•</span>
                    <span><%= transaction.transaction_date.strftime("%d/%m/%Y %I:%M %p") %></span>
                </div>

                <div class="flex items-center gap-2 mt-1">
                  <span class="relative flex shrink-0 overflow-hidden rounded-full h-6 w-6" >
                    <span class="flex h-full w-full items-center justify-center rounded-full bg-muted text-xs">JP</span>
                  </span>
                  <span class="text-xs text-gray-500">Realizado por <%= transaction.user.name %></span>
                </div>
              </div>
            </div>
          </div>

          <div class="text-right">
            <div class="font-semibold <%= transaction.incoming? ? 'text-green-500' : 'text-red-600' %>"><%= transaction.amount.format %></div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>

